```js
class UnionFind {
    constructor (n) {
        this.parents = new Uint32Array(n)
        this.ranks = new Uint32Array(n)
        while (n--) this.parents[n] = n
    }
    union (x, y) {
        const rootX = this.find(x), rootY = this.find(y)
        if (rootX !== rootY) {
            const t = this.ranks[rootX] - this.ranks[rootY]
            if (t <= 0) {
                this.parents[rootX] = rootY
                if (t === 0) this.ranks[rootY]++
            } else 
                this.parents[rootY] = rootX
        }
    }
    find (x) {
        while (x !== this.parents[x]) x = this.parents[x]
        return x
    }
}
```

